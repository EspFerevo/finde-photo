{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function searchImages(query, page) {\n  const apiKey = '43322409-71cdbf6ef8f62fb1f69ac5609';\n  const apiUrl = `https://pixabay.com/api/`;\n\n  try {\n    const response = await axios.get(apiUrl, {\n      params: {\n        key: apiKey,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: 15,\n      },\n    });\n\n    return response.data;\n  } catch (error) {\n    throw new Error('Network response was not ok');\n  }\n}\n","'use strict';\n\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('#gallery .image-card', {\n  captionsData: 'alt',\n  captionsPosition: 'bottom',\n  captionDelay: 250,\n});\n\nasync function displayImages(images) {\n  const gallery = document.getElementById('gallery');\n\n  const imageCards = await Promise.all(\n    images.map(async image => {\n      const card = await createImageCard(image);\n      return card;\n    })\n  );\n\n  gallery.append(...imageCards);\n\n  lightbox.refresh();\n}\n\nasync function createImageCard(image) {\n  const card = `\n    <a class=\"image-card\" href=\"${image.largeImageURL}\">\n      <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n      <div class=\"metadata-container\">\n        <p>Likes: ${image.likes}</p>\n        <p>Views: ${image.views}</p>\n        <p>Comments: ${image.comments}</p>\n        <p>Downloads: ${image.downloads}</p>\n      </div>\n    </a>\n  `;\n\n  const parseContainer = document.createElement('div');\n  parseContainer.innerHTML = card;\n\n  return parseContainer.firstElementChild;\n}\n\nexport { displayImages };\n","'use strict';\n\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\n\nimport { searchImages } from './js/pixabay-api.js';\nimport { displayImages } from './js/render-functions.js';\n\nconst loadBtn = document.querySelector('.load-btn');\nconst input = document.querySelector('#search-input');\nconst gallery = document.getElementById('gallery');\nconst loader = document.getElementById('loader');\n\nlet page = 1;\nlet searchWord = '';\n\ndocument.getElementById('search-form').addEventListener('submit', handleSubmit);\nloadBtn.addEventListener('click', handleLoadMoreClick);\nloadBtn.style.display = 'none';\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n  page = 1;\n  searchWord = input.value.trim();\n  gallery.innerHTML = '';\n  loader.style.display = 'block';\n\n  try {\n    const data = await searchImages(searchWord, page);\n    if (data.hits.length === 0) {\n      throw new Error(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n    }\n    displayImages(data.hits);\n    displayImages(data.hits);\n    if (data.total > 15) {\n      loadBtn.style.display = 'block';\n    } else {\n      loadBtn.style.display = 'none';\n    }\n    scrollPageSmoothly();\n  } catch (error) {\n    iziToast.error({ title: 'Error', message: error.message });\n    loadBtn.style.display = 'none';\n  } finally {\n    loader.style.display = 'none';\n    input.value = '';\n  }\n}\n\nasync function handleLoadMoreClick() {\n  loadBtn.textContent = 'Loading...';\n  page += 1;\n  loader.style.display = 'block';\n\n  try {\n    const data = await searchImages(searchWord, page);\n    await displayImages(data.hits);\n    scrollPageSmoothly();\n\n    const lastPage = Math.ceil(data.totalHits / 15);\n    if (lastPage === page) {\n      loadBtn.style.display = 'none';\n      iziToast.show({\n        message: `We're sorry, but you've reached the end of search results.`,\n        messageColor: '#FDF5E6',\n        position: 'bottomRight',\n        backgroundColor: '#FF4500',\n        progressBar: false,\n        close: false,\n        timeout: 5000,\n      });\n    }\n  } catch (error) {\n    iziToast.error({ title: 'Error', message: error.message });\n  } finally {\n    loader.style.display = 'none';\n    loadBtn.textContent = 'Load More';\n  }\n}\n\nasync function onBtnClick() {\n  page += 1;\n  try {\n    const data = await apiPixabay(searchWord, page);\n    addPictures(data.hits);\n    scrollPageSmoothly();\n  } catch (error) {\n    console.error('Error fetching data:', error);\n  }\n}\n\nfunction scrollPageSmoothly() {\n  const galleryElement = document.querySelector('#gallery');\n  if (galleryElement && galleryElement.firstElementChild) {\n    const { height: cardHeight } =\n      galleryElement.firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n}\n"],"names":["searchImages","query","page","apiKey","apiUrl","axios","lightbox","SimpleLightbox","displayImages","images","gallery","imageCards","image","createImageCard","card","parseContainer","loadBtn","input","loader","searchWord","handleSubmit","handleLoadMoreClick","event","data","scrollPageSmoothly","error","iziToast","galleryElement","cardHeight"],"mappings":"owBAEO,eAAeA,EAAaC,EAAOC,EAAM,CAC9C,MAAMC,EAAS,qCACTC,EAAS,2BAEf,GAAI,CAaF,OAZiB,MAAMC,EAAM,IAAID,EAAQ,CACvC,OAAQ,CACN,IAAKD,EACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAU,EACX,CACP,CAAK,GAEe,IACjB,MAAe,CACd,MAAM,IAAI,MAAM,6BAA6B,CAC9C,CACH,CCjBA,MAAMI,EAAW,IAAIC,EAAe,uBAAwB,CAC1D,aAAc,MACd,iBAAkB,SAClB,aAAc,GAChB,CAAC,EAED,eAAeC,EAAcC,EAAQ,CACnC,MAAMC,EAAU,SAAS,eAAe,SAAS,EAE3CC,EAAa,MAAM,QAAQ,IAC/BF,EAAO,IAAI,MAAMG,GACF,MAAMC,EAAgBD,CAAK,CAEzC,CACL,EAEEF,EAAQ,OAAO,GAAGC,CAAU,EAE5BL,EAAS,QAAO,CAClB,CAEA,eAAeO,EAAgBD,EAAO,CACpC,MAAME,EAAO;AAAA,kCACmBF,EAAM,aAAa;AAAA,kBACnCA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,oBAEpCA,EAAM,KAAK;AAAA,oBACXA,EAAM,KAAK;AAAA,uBACRA,EAAM,QAAQ;AAAA,wBACbA,EAAM,SAAS;AAAA;AAAA;AAAA,IAK/BG,EAAiB,SAAS,cAAc,KAAK,EACnD,OAAAA,EAAe,UAAYD,EAEpBC,EAAe,iBACxB,CCnCA,MAAMC,EAAU,SAAS,cAAc,WAAW,EAC5CC,EAAQ,SAAS,cAAc,eAAe,EAC9CP,EAAU,SAAS,eAAe,SAAS,EAC3CQ,EAAS,SAAS,eAAe,QAAQ,EAE/C,IAAIhB,EAAO,EACPiB,EAAa,GAEjB,SAAS,eAAe,aAAa,EAAE,iBAAiB,SAAUC,CAAY,EAC9EJ,EAAQ,iBAAiB,QAASK,CAAmB,EACrDL,EAAQ,MAAM,QAAU,OAExB,eAAeI,EAAaE,EAAO,CACjCA,EAAM,eAAc,EACpBpB,EAAO,EACPiB,EAAaF,EAAM,MAAM,OACzBP,EAAQ,UAAY,GACpBQ,EAAO,MAAM,QAAU,QAEvB,GAAI,CACF,MAAMK,EAAO,MAAMvB,EAAamB,EAAYjB,CAAI,EAChD,GAAIqB,EAAK,KAAK,SAAW,EACvB,MAAM,IAAI,MACR,0EACR,EAEIf,EAAce,EAAK,IAAI,EACvBf,EAAce,EAAK,IAAI,EACnBA,EAAK,MAAQ,GACfP,EAAQ,MAAM,QAAU,QAExBA,EAAQ,MAAM,QAAU,OAE1BQ,GACD,OAAQC,EAAO,CACdC,EAAS,MAAM,CAAE,MAAO,QAAS,QAASD,EAAM,OAAO,CAAE,EACzDT,EAAQ,MAAM,QAAU,MAC5B,QAAY,CACRE,EAAO,MAAM,QAAU,OACvBD,EAAM,MAAQ,EACf,CACH,CAEA,eAAeI,GAAsB,CACnCL,EAAQ,YAAc,aACtBd,GAAQ,EACRgB,EAAO,MAAM,QAAU,QAEvB,GAAI,CACF,MAAMK,EAAO,MAAMvB,EAAamB,EAAYjB,CAAI,EAChD,MAAMM,EAAce,EAAK,IAAI,EAC7BC,IAEiB,KAAK,KAAKD,EAAK,UAAY,EAAE,IAC7BrB,IACfc,EAAQ,MAAM,QAAU,OACxBU,EAAS,KAAK,CACZ,QAAS,6DACT,aAAc,UACd,SAAU,cACV,gBAAiB,UACjB,YAAa,GACb,MAAO,GACP,QAAS,GACjB,CAAO,EAEJ,OAAQD,EAAO,CACdC,EAAS,MAAM,CAAE,MAAO,QAAS,QAASD,EAAM,OAAO,CAAE,CAC7D,QAAY,CACRP,EAAO,MAAM,QAAU,OACvBF,EAAQ,YAAc,WACvB,CACH,CAaA,SAASQ,GAAqB,CAC5B,MAAMG,EAAiB,SAAS,cAAc,UAAU,EACxD,GAAIA,GAAkBA,EAAe,kBAAmB,CACtD,KAAM,CAAE,OAAQC,CAAY,EAC1BD,EAAe,kBAAkB,wBACnC,OAAO,SAAS,CACd,IAAKC,EAAa,EAClB,SAAU,QAChB,CAAK,CACF,CACH"}