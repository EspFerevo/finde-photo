{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["'use strict';\n\nexport async function searchImages(query, page) {\n  const apiKey = '43322409-71cdbf6ef8f62fb1f69ac5609';\n  const apiUrl = `https://pixabay.com/api/?key=${apiKey}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=15`;\n\n  const response = await fetch(apiUrl);\n\n  if (!response.ok) {\n    throw new Error('Network response was not ok');\n  }\n\n  return response.json();\n}\n","'use strict';\n\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('#gallery .image-card', {\n  captionsData: 'alt',\n  captionsPosition: 'bottom',\n  captionDelay: 250,\n});\n\nasync function displayImages(images) {\n  const gallery = document.getElementById('gallery');\n\n  const imageCards = await Promise.all(\n    images.map(async image => {\n      const card = await createImageCard(image);\n      return card;\n    })\n  );\n\n  gallery.append(...imageCards);\n\n  lightbox.refresh();\n}\n\nasync function createImageCard(image) {\n  const card = `\n    <a class=\"image-card\" href=\"${image.largeImageURL}\">\n      <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n      <div class=\"metadata-container\">\n        <p>Likes: ${image.likes}</p>\n        <p>Views: ${image.views}</p>\n        <p>Comments: ${image.comments}</p>\n        <p>Downloads: ${image.downloads}</p>\n      </div>\n    </a>\n  `;\n\n  const parseContainer = document.createElement('div');\n  parseContainer.innerHTML = card;\n\n  return parseContainer.firstElementChild;\n}\n\nexport { displayImages };\n","'use strict';\n\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport { searchImages } from './js/pixabay-api.js';\nimport { displayImages } from './js/render-functions.js';\n\nconst loadBtn = document.querySelector('.load-btn');\nconst input = document.querySelector('#search-input');\n\nlet page = 1;\nlet searchWord = null;\n\ndocument.getElementById('search-form').addEventListener('submit', handleSubmit);\nloadBtn.addEventListener('click', onBtnClick);\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n  page = 1;\n  const gallery = document.getElementById('gallery');\n  gallery.innerHTML = '';\n  const loader = document.getElementById('loader');\n  loader.style.display = 'block';\n  searchWord = input.value.trim();\n\n  try {\n    const data = await searchImages(searchWord);\n    if (data.hits.length === 0) {\n      throw new Error(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n    }\n    displayImages(data.hits);\n    if (data.total > 15) {\n      loadBtn.style.display = 'block';\n    }\n  } catch (error) {\n    iziToast.error({ title: 'Error', message: error.message });\n  } finally {\n    loader.style.display = 'none';\n    input.value = '';\n  }\n}\n\nasync function onBtnClick() {\n  page += 1;\n  const loader = document.getElementById('loader');\n  loader.style.display = 'block';\n  try {\n    const data = await searchImages(searchWord, page);\n    displayImages(data.hits);\n\n    const { height: cardHeight } = document\n      .querySelector('.gallery')\n      .firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    const lastPage = Math.ceil(data.totalHits / 15);\n    if (lastPage === page) {\n      loadBtn.style.display = 'none';\n      iziToast.show({\n        message: `We're sorry, but you've reached the end of search results.`,\n        messageColor: '#fff',\n        position: 'bottomRight',\n        backgroundColor: '#cb73fc',\n        progressBar: false,\n        close: false,\n        timeout: 5000,\n      });\n    }\n  } catch (error) {\n    iziToast.error({ title: 'Error', message: error.message });\n  } finally {\n    loader.style.display = 'none';\n  }\n}\n"],"names":["searchImages","query","page","apiUrl","response","lightbox","SimpleLightbox","displayImages","images","gallery","imageCards","image","createImageCard","card","parseContainer","loadBtn","input","searchWord","handleSubmit","onBtnClick","event","loader","data","error","iziToast","cardHeight"],"mappings":"6vBAEO,eAAeA,EAAaC,EAAOC,EAAM,CAE9C,MAAMC,EAAS,qEAA4CF,CAAK,iEAAiEC,CAAI,eAE/HE,EAAW,MAAM,MAAMD,CAAM,EAEnC,GAAI,CAACC,EAAS,GACZ,MAAM,IAAI,MAAM,6BAA6B,EAG/C,OAAOA,EAAS,MAClB,CCPA,MAAMC,EAAW,IAAIC,EAAe,uBAAwB,CAC1D,aAAc,MACd,iBAAkB,SAClB,aAAc,GAChB,CAAC,EAED,eAAeC,EAAcC,EAAQ,CACnC,MAAMC,EAAU,SAAS,eAAe,SAAS,EAE3CC,EAAa,MAAM,QAAQ,IAC/BF,EAAO,IAAI,MAAMG,GACF,MAAMC,EAAgBD,CAAK,CAEzC,CACL,EAEEF,EAAQ,OAAO,GAAGC,CAAU,EAE5BL,EAAS,QAAO,CAClB,CAEA,eAAeO,EAAgBD,EAAO,CACpC,MAAME,EAAO;AAAA,kCACmBF,EAAM,aAAa;AAAA,kBACnCA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,oBAEpCA,EAAM,KAAK;AAAA,oBACXA,EAAM,KAAK;AAAA,uBACRA,EAAM,QAAQ;AAAA,wBACbA,EAAM,SAAS;AAAA;AAAA;AAAA,IAK/BG,EAAiB,SAAS,cAAc,KAAK,EACnD,OAAAA,EAAe,UAAYD,EAEpBC,EAAe,iBACxB,CCpCA,MAAMC,EAAU,SAAS,cAAc,WAAW,EAC5CC,EAAQ,SAAS,cAAc,eAAe,EAEpD,IAAId,EAAO,EACPe,EAAa,KAEjB,SAAS,eAAe,aAAa,EAAE,iBAAiB,SAAUC,CAAY,EAC9EH,EAAQ,iBAAiB,QAASI,CAAU,EAE5C,eAAeD,EAAaE,EAAO,CACjCA,EAAM,eAAc,EACpBlB,EAAO,EACP,MAAMO,EAAU,SAAS,eAAe,SAAS,EACjDA,EAAQ,UAAY,GACpB,MAAMY,EAAS,SAAS,eAAe,QAAQ,EAC/CA,EAAO,MAAM,QAAU,QACvBJ,EAAaD,EAAM,MAAM,OAEzB,GAAI,CACF,MAAMM,EAAO,MAAMtB,EAAaiB,CAAU,EAC1C,GAAIK,EAAK,KAAK,SAAW,EACvB,MAAM,IAAI,MACR,0EACR,EAEIf,EAAce,EAAK,IAAI,EACnBA,EAAK,MAAQ,KACfP,EAAQ,MAAM,QAAU,QAE3B,OAAQQ,EAAO,CACdC,EAAS,MAAM,CAAE,MAAO,QAAS,QAASD,EAAM,OAAO,CAAE,CAC7D,QAAY,CACRF,EAAO,MAAM,QAAU,OACvBL,EAAM,MAAQ,EACf,CACH,CAEA,eAAeG,GAAa,CAC1BjB,GAAQ,EACR,MAAMmB,EAAS,SAAS,eAAe,QAAQ,EAC/CA,EAAO,MAAM,QAAU,QACvB,GAAI,CACF,MAAMC,EAAO,MAAMtB,EAAaiB,EAAYf,CAAI,EAChDK,EAAce,EAAK,IAAI,EAEvB,KAAM,CAAE,OAAQG,CAAU,EAAK,SAC5B,cAAc,UAAU,EACxB,kBAAkB,sBAAqB,EAC1C,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QAChB,CAAK,EAEgB,KAAK,KAAKH,EAAK,UAAY,EAAE,IAC7BpB,IACfa,EAAQ,MAAM,QAAU,OACxBS,EAAS,KAAK,CACZ,QAAS,6DACT,aAAc,OACd,SAAU,cACV,gBAAiB,UACjB,YAAa,GACb,MAAO,GACP,QAAS,GACjB,CAAO,EAEJ,OAAQD,EAAO,CACdC,EAAS,MAAM,CAAE,MAAO,QAAS,QAASD,EAAM,OAAO,CAAE,CAC7D,QAAY,CACRF,EAAO,MAAM,QAAU,MACxB,CACH"}